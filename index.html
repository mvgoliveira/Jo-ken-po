<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jo-ken-po</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="conteudo">
        <section class="esquerda">
            <article class="inimigo">
                <img id="escolhaInimigo" src="./assets/svg/BalÃ£o-nulo.svg" alt="">
                <img src="./assets/svg/Enemy.svg" alt="" width="150px">    
                <h2>Inimigo</h2>
                <h3 id="inimigoPonto">pontos: 0</h3>
            </article>
        </section>
            
        <section class="direita">
            <article class="opcoes">
                <a><img id="opc1" src="./assets/svg/Pedra.svg" alt="Pedra" onclick="selecionar(1)"></a>
                <a><img id="opc2" src="./assets/svg/Papel.svg" alt="Papel" onclick="selecionar(2)"></a>
                <a><img id="opc3" src="./assets/svg/Tesoura.svg" alt="Tesoura" onclick="selecionar(3)"></a>
            </article>

            <article class="escolha">
                <p id="escolha">Sua escolha:</p>
                <button id="confirmar" type="button" onclick="jogar()">Confirmar</button>
            </article>

            <h2 id="rodada">Rodada 0</h2>
            <h3 id="playerPonto">Pontos: 0</h3>
            
        </section>

        <section id="popup">
            <img id="popupimg" src="" width="400px">
            <p id="popupexit"></p>
            <p id="popupmsg"></p>
        </section>
    </div>

    <script>

        var escolhaJogador = 0;
        var jogadas = 1;

        var playerPonto = 0;
        var InimigoPonto = 0;

        var opc = ["Pedra", "Papel", "Tesoura"];

        document.getElementById('confirmar').disabled = true;

        function selecionar(escolha) {

            document.getElementById('opc1').style.opacity = 0.5;
            document.getElementById('opc2').style.opacity = 0.5;
            document.getElementById('opc3').style.opacity = 0.5;

            escolhaJogador = escolha;

            document.getElementById('opc' + String(escolhaJogador)).style.opacity = 1;

            document.getElementById('confirmar').style.cursor = "pointer"; 
            document.getElementById('confirmar').style.background = "#419A5C"; 
            document.getElementById('confirmar').disabled = false;

            document.getElementById('escolha').textContent = ("SUA ESCOLHA: " + String(opc[escolha-1]))
        
        }

        function jogar() {

            jogadas++;

            escolhaComputador = Math.floor((Math.random() * (3 - 1 + 1)) + 1);

            document.getElementById('escolhaInimigo').src = './assets/svg/' + String(escolhaComputador) + '-inimigo.svg';

            document.getElementById('rodada').textContent = ("rodada " + String(jogadas));

            if (escolhaJogador == escolhaComputador) {
                
            } else {
                if (((escolhaJogador - 1) == escolhaComputador) && (escolhaJogador != 1)){
                    playerPonto++;
                    resultado(1);
                } else {
                    if (((escolhaJogador + 2) == escolhaComputador) && (escolhaJogador == 1)) {
                        playerPonto++;
                        resultado(1);
                    } else {
                        InimigoPonto++;
                        resultado(0);
                    }
                }
            }

            document.getElementById('playerPonto').textContent = ("Pontos: " + String(playerPonto));
            document.getElementById('inimigoPonto').textContent = ("Pontos: " + String(InimigoPonto));

        }

        function resultado(valor) {
            if (valor == 1) {
                
                document.getElementById('popupimg').style.display = "grid";
                document.getElementById('popupimg').src = './assets/img/win.jpg';
                document.getElementById('popupimg').dataset.content = 'x';
                document.getElementById('popupmsg').textContent = ("Ganhou!")
            } else {
                document.getElementById('popupimg').style.display = "grid";
                document.getElementById('popupimg').src = "./assets/img/defeat.jpg";
                document.getElementById('popupimg').dataset.content = 'x';
                document.getElementById('popupmsg').textContent = ("Perdeu!")
            }

            setTimeout(apagar, 2000);
        }

        function apagar() {
            document.getElementById('popupimg').style.display = "none";
        }

    </script>
</body>
</html>